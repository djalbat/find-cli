"use strict";
import { arrayUtilities } from "necessary";
import { updatePreviousRules, retrievePreviousRules } from "../configuration";
var filter = arrayUtilities.filter;
export default function previousRuleOperation(proceed, abort, context) {
    var dryRun = context.dryRun;
    if (dryRun) {
        proceed();
        return;
    }
    var rule = context.rule;
    var previousRules = retrievePreviousRules();
    filter(previousRules, function(previousRule) {
        var previousRuleEqualToRule = previousRule.isEqualTo(rule);
        if (!previousRuleEqualToRule) {
            return true;
        }
    });
    var previousRule = rule; ///
    previousRules.unshift(previousRule);
    updatePreviousRules(previousRules);
    proceed();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb24vcHJldmlvdXNSdWxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBhcnJheVV0aWxpdGllcyB9IGZyb20gXCJuZWNlc3NhcnlcIjtcblxuaW1wb3J0IHsgdXBkYXRlUHJldmlvdXNSdWxlcywgcmV0cmlldmVQcmV2aW91c1J1bGVzIH0gZnJvbSBcIi4uL2NvbmZpZ3VyYXRpb25cIjtcblxuY29uc3QgeyBmaWx0ZXIgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcmV2aW91c1J1bGVPcGVyYXRpb24ocHJvY2VlZCwgYWJvcnQsIGNvbnRleHQpIHtcbiAgY29uc3QgeyBkcnlSdW4gfSA9IGNvbnRleHQ7XG5cbiAgaWYgKGRyeVJ1bikge1xuICAgIHByb2NlZWQoKTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgcnVsZSB9ID0gY29udGV4dDtcblxuICBjb25zdCBwcmV2aW91c1J1bGVzID0gcmV0cmlldmVQcmV2aW91c1J1bGVzKCk7XG5cbiAgZmlsdGVyKHByZXZpb3VzUnVsZXMsIChwcmV2aW91c1J1bGUpID0+IHtcbiAgICBjb25zdCBwcmV2aW91c1J1bGVFcXVhbFRvUnVsZSA9IHByZXZpb3VzUnVsZS5pc0VxdWFsVG8ocnVsZSk7XG5cbiAgICBpZiAoIXByZXZpb3VzUnVsZUVxdWFsVG9SdWxlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHByZXZpb3VzUnVsZSA9IHJ1bGU7ICAvLy9cblxuICBwcmV2aW91c1J1bGVzLnVuc2hpZnQocHJldmlvdXNSdWxlKTtcblxuICB1cGRhdGVQcmV2aW91c1J1bGVzKHByZXZpb3VzUnVsZXMpO1xuXG4gIHByb2NlZWQoKTtcbn1cbiJdLCJuYW1lcyI6WyJhcnJheVV0aWxpdGllcyIsInVwZGF0ZVByZXZpb3VzUnVsZXMiLCJyZXRyaWV2ZVByZXZpb3VzUnVsZXMiLCJmaWx0ZXIiLCJwcmV2aW91c1J1bGVPcGVyYXRpb24iLCJwcm9jZWVkIiwiYWJvcnQiLCJjb250ZXh0IiwiZHJ5UnVuIiwicnVsZSIsInByZXZpb3VzUnVsZXMiLCJwcmV2aW91c1J1bGUiLCJwcmV2aW91c1J1bGVFcXVhbFRvUnVsZSIsImlzRXF1YWxUbyIsInVuc2hpZnQiXSwibWFwcGluZ3MiOiJBQUFBO0FBRUEsU0FBU0EsY0FBYyxRQUFRLFlBQVk7QUFFM0MsU0FBU0MsbUJBQW1CLEVBQUVDLHFCQUFxQixRQUFRLG1CQUFtQjtBQUU5RSxJQUFNLEFBQUVDLFNBQVdILGVBQVhHO0FBRVIsZUFBZSxTQUFTQyxzQkFBc0JDLE9BQU8sRUFBRUMsS0FBSyxFQUFFQyxPQUFPO0lBQ25FLElBQU0sQUFBRUMsU0FBV0QsUUFBWEM7SUFFUixJQUFJQSxRQUFRO1FBQ1ZIO1FBRUE7SUFDRjtJQUVBLElBQU0sQUFBRUksT0FBU0YsUUFBVEU7SUFFUixJQUFNQyxnQkFBZ0JSO0lBRXRCQyxPQUFPTyxlQUFlLFNBQUNDO1FBQ3JCLElBQU1DLDBCQUEwQkQsYUFBYUUsU0FBUyxDQUFDSjtRQUV2RCxJQUFJLENBQUNHLHlCQUF5QjtZQUM1QixPQUFPO1FBQ1Q7SUFDRjtJQUVBLElBQU1ELGVBQWVGLE1BQU8sR0FBRztJQUUvQkMsY0FBY0ksT0FBTyxDQUFDSDtJQUV0QlYsb0JBQW9CUztJQUVwQkw7QUFDRiJ9