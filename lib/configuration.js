"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _necessary = require("necessary");
const _glob = /*#__PURE__*/ _interop_require_default(require("./rule/glob"));
const _regex = /*#__PURE__*/ _interop_require_default(require("./rule/regex"));
const _string = /*#__PURE__*/ _interop_require_default(require("./rule/string"));
const _constants = require("./constants");
const _version_1_7 = require("./configuration/version_1_7");
const _version_1_1 = require("./configuration/version_1_1");
const _version_1_2 = require("./configuration/version_1_2");
const _version_1_3 = require("./configuration/version_1_3");
const _version_1_4 = require("./configuration/version_1_4");
const _messages = require("./messages");
const _versions = require("./versions");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const { rc } = _necessary.configurationUtilities, { migrate } = _necessary.versionUtilities, { setRCBaseExtension, checkRCFileExists, updateRCFile, writeRCFile, readRCFile } = rc;
setRCBaseExtension(_constants.FIND);
function retrieveRootDirectoryPaths() {
    const configuration = readConfigurationFile(), { rootDirectoryPaths } = configuration;
    return rootDirectoryPaths;
}
function retrievePreviousRules() {
    const configuration = readConfigurationFile();
    let { previousRules } = configuration;
    const previousRulesJSON = previousRules; ///
    previousRules = rulesFromPathRulesJSON(previousRulesJSON);
    return previousRules;
}
function retrieveIgnoredFilePathRules() {
    const configuration = readConfigurationFile();
    let { ignoredFilePathRules } = configuration;
    const ignoredFilePathRulesJSON = ignoredFilePathRules; ///
    ignoredFilePathRules = rulesFromPathRulesJSON(ignoredFilePathRulesJSON);
    return ignoredFilePathRules;
}
function retrievePermittedFilePathRules() {
    const configuration = readConfigurationFile();
    let { permittedFilePathRules } = configuration;
    const permittedFilePathRulesJSON = permittedFilePathRules; ///
    permittedFilePathRules = rulesFromPathRulesJSON(permittedFilePathRulesJSON);
    return permittedFilePathRules;
}
function retrieveIgnoredDirectoryPathRules() {
    const configuration = readConfigurationFile();
    let { ignoredDirectoryPathRules } = configuration;
    const ignoredDirectoryPathRulesJSON = ignoredDirectoryPathRules; ///
    ignoredDirectoryPathRules = rulesFromPathRulesJSON(ignoredDirectoryPathRulesJSON);
    return ignoredDirectoryPathRules;
}
function retrievePermittedDirectoryPathRules() {
    const configuration = readConfigurationFile();
    let { permittedDirectoryPathRules } = configuration;
    const permittedDirectoryPathRulesJSON = permittedDirectoryPathRules; ///
    permittedDirectoryPathRules = rulesFromPathRulesJSON(permittedDirectoryPathRulesJSON);
    return permittedDirectoryPathRules;
}
function updateRootDirectoryPaths(rootDirectoryPaths) {
    updateConfigurationFile({
        rootDirectoryPaths
    });
}
function updatePreviousRules(previousRules) {
    const previousRulesJSON = rulesJSONFromRules(previousRules);
    previousRules = previousRulesJSON; ///
    updateConfigurationFile({
        previousRules
    });
}
function updateIgnoredFilePathRules(ignoredFilePathRules) {
    const ignoredFilePathRulesJSON = rulesJSONFromRules(ignoredFilePathRules);
    ignoredFilePathRules = ignoredFilePathRulesJSON; ///
    updateConfigurationFile({
        ignoredFilePathRules
    });
}
function updatePermittedFilePathRules(permittedFilePathRules) {
    const permittedFilePathRulesJSON = rulesJSONFromRules(permittedFilePathRules);
    permittedFilePathRules = permittedFilePathRulesJSON; ///
    updateConfigurationFile({
        permittedFilePathRules
    });
}
function updateIgnoredDirectoryPathRules(ignoredDirectoryPathRules) {
    const ignoredDirectoryPathRulesJSON = rulesJSONFromRules(ignoredDirectoryPathRules);
    ignoredDirectoryPathRules = ignoredDirectoryPathRulesJSON; ///
    updateConfigurationFile({
        ignoredDirectoryPathRules
    });
}
function updatePermittedDirectoryPathRules(permittedDirectoryPathRules) {
    const permittedDirectoryPathRulesJSON = rulesJSONFromRules(permittedDirectoryPathRules);
    permittedDirectoryPathRules = permittedDirectoryPathRulesJSON; ///
    updateConfigurationFile({
        permittedDirectoryPathRules
    });
}
function createConfigurationFile() {
    const configuration = (0, _version_1_7.createConfiguration)(), json = configuration; ///
    writeRCFile(json);
}
function migrateConfigurationFile() {
    assertConfigurationFileExists();
    let json = readRCFile();
    const migrationMap = {
        [_versions.VERSION_1_0]: _version_1_1.migrateConfigurationToVersion_1_1,
        [_versions.VERSION_1_1]: _version_1_2.migrateConfigurationToVersion_1_2,
        [_versions.VERSION_1_2]: _version_1_3.migrateConfigurationToVersion_1_3,
        [_versions.VERSION_1_3]: _version_1_4.migrateConfigurationToVersion_1_4,
        [_versions.VERSION_1_4]: _version_1_7.migrateConfigurationToVersion_1_7
    }, latestVersion = _versions.VERSION_1_7;
    json = migrate(json, migrationMap, latestVersion);
    writeRCFile(json);
}
function checkConfigurationFileExists() {
    const rcFileExists = checkRCFileExists(), configurationFileExists = rcFileExists; ///
    return configurationFileExists;
}
function assertConfigurationFileExists() {
    const configurationFileExists = checkConfigurationFileExists();
    if (!configurationFileExists) {
        console.log(_messages.CONFIGURATION_FILE_DOES_NOT_EXIST_MESSAGE);
        process.exit(1);
    }
}
module.exports = {
    retrieveRootDirectoryPaths,
    retrievePreviousRules,
    retrieveIgnoredFilePathRules,
    retrievePermittedFilePathRules,
    retrieveIgnoredDirectoryPathRules,
    retrievePermittedDirectoryPathRules,
    updatePreviousRules,
    updateRootDirectoryPaths,
    updateIgnoredFilePathRules,
    updatePermittedFilePathRules,
    updateIgnoredDirectoryPathRules,
    updatePermittedDirectoryPathRules,
    createConfigurationFile,
    migrateConfigurationFile,
    checkConfigurationFileExists
};
function readConfigurationFile() {
    assertConfigurationFileExists();
    const json = readRCFile(), configuration = json; ///
    return configuration;
}
function writeConfigurationFile(configuration) {
    assertConfigurationFileExists();
    const json = configuration; ///
    writeRCFile(json);
}
function updateConfigurationFile(addedConfiguration, ...deleteConfigurationNames) {
    assertConfigurationFileExists();
    const addedProperties = addedConfiguration, deletedPropertyNames = deleteConfigurationNames; ///
    updateRCFile(addedProperties, ...deletedPropertyNames);
}
function rulesFromPathRulesJSON(rulesJSON) {
    const rules = rulesJSON.map((ruleJSON)=>{
        const json = ruleJSON, rule = _glob.default.fromJSON(json) || _regex.default.fromJSON(json) || _string.default.fromJSON(json);
        return rule;
    });
    return rules;
}
function rulesJSONFromRules(rules) {
    const rulesJSON = rules.map((rule)=>{
        const ruleJSON = rule.toJSON();
        return ruleJSON;
    });
    return rulesJSON;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25maWd1cmF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyB2ZXJzaW9uVXRpbGl0aWVzLCBjb25maWd1cmF0aW9uVXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgR2xvYlJ1bGUgZnJvbSBcIi4vcnVsZS9nbG9iXCI7XG5pbXBvcnQgUmVnZXhSdWxlIGZyb20gXCIuL3J1bGUvcmVnZXhcIjtcbmltcG9ydCBTdHJpbmdSdWxlIGZyb20gXCIuL3J1bGUvc3RyaW5nXCI7XG5cbmltcG9ydCB7IEZJTkQgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IGNyZWF0ZUNvbmZpZ3VyYXRpb24gfSBmcm9tIFwiLi9jb25maWd1cmF0aW9uL3ZlcnNpb25fMV83XCI7XG5pbXBvcnQgeyBtaWdyYXRlQ29uZmlndXJhdGlvblRvVmVyc2lvbl8xXzEgfSBmcm9tIFwiLi9jb25maWd1cmF0aW9uL3ZlcnNpb25fMV8xXCI7XG5pbXBvcnQgeyBtaWdyYXRlQ29uZmlndXJhdGlvblRvVmVyc2lvbl8xXzIgfSBmcm9tIFwiLi9jb25maWd1cmF0aW9uL3ZlcnNpb25fMV8yXCI7XG5pbXBvcnQgeyBtaWdyYXRlQ29uZmlndXJhdGlvblRvVmVyc2lvbl8xXzMgfSBmcm9tIFwiLi9jb25maWd1cmF0aW9uL3ZlcnNpb25fMV8zXCI7XG5pbXBvcnQgeyBtaWdyYXRlQ29uZmlndXJhdGlvblRvVmVyc2lvbl8xXzQgfSBmcm9tIFwiLi9jb25maWd1cmF0aW9uL3ZlcnNpb25fMV80XCI7XG5pbXBvcnQgeyBtaWdyYXRlQ29uZmlndXJhdGlvblRvVmVyc2lvbl8xXzcgfSBmcm9tIFwiLi9jb25maWd1cmF0aW9uL3ZlcnNpb25fMV83XCI7XG5pbXBvcnQgeyBDT05GSUdVUkFUSU9OX0ZJTEVfRE9FU19OT1RfRVhJU1RfTUVTU0FHRSB9IGZyb20gXCIuL21lc3NhZ2VzXCI7XG5pbXBvcnQgeyBWRVJTSU9OXzFfMCwgVkVSU0lPTl8xXzEsIFZFUlNJT05fMV8yLCBWRVJTSU9OXzFfMywgVkVSU0lPTl8xXzQsIFZFUlNJT05fMV83IH0gZnJvbSBcIi4vdmVyc2lvbnNcIjtcblxuY29uc3QgeyByYyB9ID0gY29uZmlndXJhdGlvblV0aWxpdGllcyxcbiAgICAgIHsgbWlncmF0ZSB9ID0gdmVyc2lvblV0aWxpdGllcyxcbiAgICAgIHsgc2V0UkNCYXNlRXh0ZW5zaW9uLCBjaGVja1JDRmlsZUV4aXN0cywgdXBkYXRlUkNGaWxlLCB3cml0ZVJDRmlsZSwgcmVhZFJDRmlsZSB9ID0gcmM7XG5cbnNldFJDQmFzZUV4dGVuc2lvbihGSU5EKTtcblxuZnVuY3Rpb24gcmV0cmlldmVSb290RGlyZWN0b3J5UGF0aHMoKSB7XG4gIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSByZWFkQ29uZmlndXJhdGlvbkZpbGUoKSxcbiAgICAgICAgeyByb290RGlyZWN0b3J5UGF0aHMgfSA9IGNvbmZpZ3VyYXRpb247XG5cbiAgcmV0dXJuIHJvb3REaXJlY3RvcnlQYXRocztcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVQcmV2aW91c1J1bGVzKCkge1xuICBjb25zdCBjb25maWd1cmF0aW9uID0gcmVhZENvbmZpZ3VyYXRpb25GaWxlKCk7XG5cbiAgbGV0IHsgcHJldmlvdXNSdWxlcyB9ID0gY29uZmlndXJhdGlvbjtcblxuICBjb25zdCBwcmV2aW91c1J1bGVzSlNPTiA9IHByZXZpb3VzUnVsZXM7ICAvLy9cblxuICBwcmV2aW91c1J1bGVzID0gcnVsZXNGcm9tUGF0aFJ1bGVzSlNPTihwcmV2aW91c1J1bGVzSlNPTik7XG5cbiAgcmV0dXJuIHByZXZpb3VzUnVsZXM7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSWdub3JlZEZpbGVQYXRoUnVsZXMoKSB7XG4gIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSByZWFkQ29uZmlndXJhdGlvbkZpbGUoKTtcblxuICBsZXQgeyBpZ25vcmVkRmlsZVBhdGhSdWxlcyB9ID0gY29uZmlndXJhdGlvbjtcblxuICBjb25zdCBpZ25vcmVkRmlsZVBhdGhSdWxlc0pTT04gPSBpZ25vcmVkRmlsZVBhdGhSdWxlczsgIC8vL1xuXG4gIGlnbm9yZWRGaWxlUGF0aFJ1bGVzID0gcnVsZXNGcm9tUGF0aFJ1bGVzSlNPTihpZ25vcmVkRmlsZVBhdGhSdWxlc0pTT04pO1xuXG4gIHJldHVybiBpZ25vcmVkRmlsZVBhdGhSdWxlcztcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVQZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzKCkge1xuICBjb25zdCBjb25maWd1cmF0aW9uID0gcmVhZENvbmZpZ3VyYXRpb25GaWxlKCk7XG5cbiAgbGV0IHsgcGVybWl0dGVkRmlsZVBhdGhSdWxlcyB9ID0gY29uZmlndXJhdGlvbjtcblxuICBjb25zdCBwZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzSlNPTiA9IHBlcm1pdHRlZEZpbGVQYXRoUnVsZXM7ICAvLy9cblxuICBwZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzID0gcnVsZXNGcm9tUGF0aFJ1bGVzSlNPTihwZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzSlNPTik7XG5cbiAgcmV0dXJuIHBlcm1pdHRlZEZpbGVQYXRoUnVsZXM7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlSWdub3JlZERpcmVjdG9yeVBhdGhSdWxlcygpIHtcbiAgY29uc3QgY29uZmlndXJhdGlvbiA9IHJlYWRDb25maWd1cmF0aW9uRmlsZSgpO1xuXG4gIGxldCB7IGlnbm9yZWREaXJlY3RvcnlQYXRoUnVsZXMgfSA9IGNvbmZpZ3VyYXRpb247XG5cbiAgY29uc3QgaWdub3JlZERpcmVjdG9yeVBhdGhSdWxlc0pTT04gPSBpZ25vcmVkRGlyZWN0b3J5UGF0aFJ1bGVzOyAgLy8vXG5cbiAgaWdub3JlZERpcmVjdG9yeVBhdGhSdWxlcyA9IHJ1bGVzRnJvbVBhdGhSdWxlc0pTT04oaWdub3JlZERpcmVjdG9yeVBhdGhSdWxlc0pTT04pO1xuXG4gIHJldHVybiBpZ25vcmVkRGlyZWN0b3J5UGF0aFJ1bGVzO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZVBlcm1pdHRlZERpcmVjdG9yeVBhdGhSdWxlcygpIHtcbiAgY29uc3QgY29uZmlndXJhdGlvbiA9IHJlYWRDb25maWd1cmF0aW9uRmlsZSgpO1xuXG4gIGxldCB7IHBlcm1pdHRlZERpcmVjdG9yeVBhdGhSdWxlcyB9ID0gY29uZmlndXJhdGlvbjtcblxuICBjb25zdCBwZXJtaXR0ZWREaXJlY3RvcnlQYXRoUnVsZXNKU09OID0gcGVybWl0dGVkRGlyZWN0b3J5UGF0aFJ1bGVzOyAgLy8vXG5cbiAgcGVybWl0dGVkRGlyZWN0b3J5UGF0aFJ1bGVzID0gcnVsZXNGcm9tUGF0aFJ1bGVzSlNPTihwZXJtaXR0ZWREaXJlY3RvcnlQYXRoUnVsZXNKU09OKTtcblxuICByZXR1cm4gcGVybWl0dGVkRGlyZWN0b3J5UGF0aFJ1bGVzO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVSb290RGlyZWN0b3J5UGF0aHMocm9vdERpcmVjdG9yeVBhdGhzKSB7XG4gIHVwZGF0ZUNvbmZpZ3VyYXRpb25GaWxlKHtcbiAgICByb290RGlyZWN0b3J5UGF0aHNcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVByZXZpb3VzUnVsZXMocHJldmlvdXNSdWxlcykge1xuICBjb25zdCBwcmV2aW91c1J1bGVzSlNPTiA9IHJ1bGVzSlNPTkZyb21SdWxlcyhwcmV2aW91c1J1bGVzKTtcblxuICBwcmV2aW91c1J1bGVzID0gcHJldmlvdXNSdWxlc0pTT047ICAvLy9cblxuICB1cGRhdGVDb25maWd1cmF0aW9uRmlsZSh7XG4gICAgcHJldmlvdXNSdWxlc1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlSWdub3JlZEZpbGVQYXRoUnVsZXMoaWdub3JlZEZpbGVQYXRoUnVsZXMpIHtcbiAgY29uc3QgaWdub3JlZEZpbGVQYXRoUnVsZXNKU09OID0gcnVsZXNKU09ORnJvbVJ1bGVzKGlnbm9yZWRGaWxlUGF0aFJ1bGVzKTtcblxuICBpZ25vcmVkRmlsZVBhdGhSdWxlcyA9IGlnbm9yZWRGaWxlUGF0aFJ1bGVzSlNPTjsgIC8vL1xuXG4gIHVwZGF0ZUNvbmZpZ3VyYXRpb25GaWxlKHtcbiAgICBpZ25vcmVkRmlsZVBhdGhSdWxlc1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUGVybWl0dGVkRmlsZVBhdGhSdWxlcyhwZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzKSB7XG4gIGNvbnN0IHBlcm1pdHRlZEZpbGVQYXRoUnVsZXNKU09OID0gcnVsZXNKU09ORnJvbVJ1bGVzKHBlcm1pdHRlZEZpbGVQYXRoUnVsZXMpO1xuXG4gIHBlcm1pdHRlZEZpbGVQYXRoUnVsZXMgPSBwZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzSlNPTjsgIC8vL1xuXG4gIHVwZGF0ZUNvbmZpZ3VyYXRpb25GaWxlKHtcbiAgICBwZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzXG4gIH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVJZ25vcmVkRGlyZWN0b3J5UGF0aFJ1bGVzKGlnbm9yZWREaXJlY3RvcnlQYXRoUnVsZXMpIHtcbiAgY29uc3QgaWdub3JlZERpcmVjdG9yeVBhdGhSdWxlc0pTT04gPSBydWxlc0pTT05Gcm9tUnVsZXMoaWdub3JlZERpcmVjdG9yeVBhdGhSdWxlcyk7XG5cbiAgaWdub3JlZERpcmVjdG9yeVBhdGhSdWxlcyA9IGlnbm9yZWREaXJlY3RvcnlQYXRoUnVsZXNKU09OOyAgLy8vXG5cbiAgdXBkYXRlQ29uZmlndXJhdGlvbkZpbGUoe1xuICAgIGlnbm9yZWREaXJlY3RvcnlQYXRoUnVsZXNcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVBlcm1pdHRlZERpcmVjdG9yeVBhdGhSdWxlcyhwZXJtaXR0ZWREaXJlY3RvcnlQYXRoUnVsZXMpIHtcbiAgY29uc3QgcGVybWl0dGVkRGlyZWN0b3J5UGF0aFJ1bGVzSlNPTiA9IHJ1bGVzSlNPTkZyb21SdWxlcyhwZXJtaXR0ZWREaXJlY3RvcnlQYXRoUnVsZXMpO1xuXG4gIHBlcm1pdHRlZERpcmVjdG9yeVBhdGhSdWxlcyA9IHBlcm1pdHRlZERpcmVjdG9yeVBhdGhSdWxlc0pTT047ICAvLy9cblxuICB1cGRhdGVDb25maWd1cmF0aW9uRmlsZSh7XG4gICAgcGVybWl0dGVkRGlyZWN0b3J5UGF0aFJ1bGVzXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb25maWd1cmF0aW9uRmlsZSgpIHtcbiAgY29uc3QgY29uZmlndXJhdGlvbiA9IGNyZWF0ZUNvbmZpZ3VyYXRpb24oKSxcbiAgICAgICAganNvbiA9IGNvbmZpZ3VyYXRpb247IC8vL1xuXG4gIHdyaXRlUkNGaWxlKGpzb24pO1xufVxuXG5mdW5jdGlvbiBtaWdyYXRlQ29uZmlndXJhdGlvbkZpbGUoKSB7XG4gIGFzc2VydENvbmZpZ3VyYXRpb25GaWxlRXhpc3RzKCk7XG5cbiAgbGV0IGpzb24gPSByZWFkUkNGaWxlKCk7XG5cbiAgY29uc3QgbWlncmF0aW9uTWFwID0ge1xuICAgICAgICAgIFsgVkVSU0lPTl8xXzAgXTogbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMV8xLFxuICAgICAgICAgIFsgVkVSU0lPTl8xXzEgXTogbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMV8yLFxuICAgICAgICAgIFsgVkVSU0lPTl8xXzIgXTogbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMV8zLFxuICAgICAgICAgIFsgVkVSU0lPTl8xXzMgXTogbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMV80LFxuICAgICAgICAgIFsgVkVSU0lPTl8xXzQgXTogbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMV83XG4gICAgICAgIH0sXG4gICAgICAgIGxhdGVzdFZlcnNpb24gPSBWRVJTSU9OXzFfNztcblxuICBqc29uID0gbWlncmF0ZShqc29uLCBtaWdyYXRpb25NYXAsIGxhdGVzdFZlcnNpb24pO1xuXG4gIHdyaXRlUkNGaWxlKGpzb24pO1xufVxuXG5mdW5jdGlvbiBjaGVja0NvbmZpZ3VyYXRpb25GaWxlRXhpc3RzKCkge1xuICBjb25zdCByY0ZpbGVFeGlzdHMgPSBjaGVja1JDRmlsZUV4aXN0cygpLFxuICAgICAgICBjb25maWd1cmF0aW9uRmlsZUV4aXN0cyA9IHJjRmlsZUV4aXN0czsgLy8vXG5cbiAgcmV0dXJuIGNvbmZpZ3VyYXRpb25GaWxlRXhpc3RzO1xufVxuXG5mdW5jdGlvbiBhc3NlcnRDb25maWd1cmF0aW9uRmlsZUV4aXN0cygpIHtcbiAgY29uc3QgY29uZmlndXJhdGlvbkZpbGVFeGlzdHMgPSBjaGVja0NvbmZpZ3VyYXRpb25GaWxlRXhpc3RzKCk7XG5cbiAgaWYgKCFjb25maWd1cmF0aW9uRmlsZUV4aXN0cykge1xuICAgIGNvbnNvbGUubG9nKENPTkZJR1VSQVRJT05fRklMRV9ET0VTX05PVF9FWElTVF9NRVNTQUdFKTtcblxuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmV0cmlldmVSb290RGlyZWN0b3J5UGF0aHMsXG4gIHJldHJpZXZlUHJldmlvdXNSdWxlcyxcbiAgcmV0cmlldmVJZ25vcmVkRmlsZVBhdGhSdWxlcyxcbiAgcmV0cmlldmVQZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzLFxuICByZXRyaWV2ZUlnbm9yZWREaXJlY3RvcnlQYXRoUnVsZXMsXG4gIHJldHJpZXZlUGVybWl0dGVkRGlyZWN0b3J5UGF0aFJ1bGVzLFxuICB1cGRhdGVQcmV2aW91c1J1bGVzLFxuICB1cGRhdGVSb290RGlyZWN0b3J5UGF0aHMsXG4gIHVwZGF0ZUlnbm9yZWRGaWxlUGF0aFJ1bGVzLFxuICB1cGRhdGVQZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzLFxuICB1cGRhdGVJZ25vcmVkRGlyZWN0b3J5UGF0aFJ1bGVzLFxuICB1cGRhdGVQZXJtaXR0ZWREaXJlY3RvcnlQYXRoUnVsZXMsXG4gIGNyZWF0ZUNvbmZpZ3VyYXRpb25GaWxlLFxuICBtaWdyYXRlQ29uZmlndXJhdGlvbkZpbGUsXG4gIGNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHNcbn07XG5cbmZ1bmN0aW9uIHJlYWRDb25maWd1cmF0aW9uRmlsZSgpIHtcbiAgYXNzZXJ0Q29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICBjb25zdCBqc29uID0gcmVhZFJDRmlsZSgpLFxuICAgICAgICBjb25maWd1cmF0aW9uID0ganNvbjsgLy8vXG5cbiAgcmV0dXJuIGNvbmZpZ3VyYXRpb247XG59XG5cbmZ1bmN0aW9uIHdyaXRlQ29uZmlndXJhdGlvbkZpbGUoY29uZmlndXJhdGlvbikge1xuICBhc3NlcnRDb25maWd1cmF0aW9uRmlsZUV4aXN0cygpO1xuXG4gIGNvbnN0IGpzb24gPSBjb25maWd1cmF0aW9uOyAvLy9cblxuICB3cml0ZVJDRmlsZShqc29uKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ29uZmlndXJhdGlvbkZpbGUoYWRkZWRDb25maWd1cmF0aW9uLCAuLi5kZWxldGVDb25maWd1cmF0aW9uTmFtZXMpIHtcbiAgYXNzZXJ0Q29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICBjb25zdCBhZGRlZFByb3BlcnRpZXMgPSBhZGRlZENvbmZpZ3VyYXRpb24sIC8vL1xuICAgICAgICBkZWxldGVkUHJvcGVydHlOYW1lcyA9IGRlbGV0ZUNvbmZpZ3VyYXRpb25OYW1lczsgIC8vL1xuXG4gIHVwZGF0ZVJDRmlsZShhZGRlZFByb3BlcnRpZXMsIC4uLmRlbGV0ZWRQcm9wZXJ0eU5hbWVzKTtcbn1cblxuZnVuY3Rpb24gcnVsZXNGcm9tUGF0aFJ1bGVzSlNPTihydWxlc0pTT04pIHtcbiAgY29uc3QgcnVsZXMgPSBydWxlc0pTT04ubWFwKChydWxlSlNPTikgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBydWxlSlNPTiwgLy8vXG4gICAgICAgICAgcnVsZSA9IEdsb2JSdWxlLmZyb21KU09OKGpzb24pIHx8XG4gICAgICAgICAgICAgICAgICAgIFJlZ2V4UnVsZS5mcm9tSlNPTihqc29uKSB8fFxuICAgICAgICAgICAgICAgICAgICBTdHJpbmdSdWxlLmZyb21KU09OKGpzb24pO1xuXG4gICAgcmV0dXJuIHJ1bGU7XG4gIH0pO1xuXG4gIHJldHVybiBydWxlcztcbn1cblxuZnVuY3Rpb24gcnVsZXNKU09ORnJvbVJ1bGVzKHJ1bGVzKSB7XG4gIGNvbnN0IHJ1bGVzSlNPTiA9IHJ1bGVzLm1hcCgocnVsZSkgPT4ge1xuICAgIGNvbnN0IHJ1bGVKU09OID0gcnVsZS50b0pTT04oKTtcblxuICAgIHJldHVybiBydWxlSlNPTjtcbiAgfSk7XG5cbiAgcmV0dXJuIHJ1bGVzSlNPTjtcbn1cbiJdLCJuYW1lcyI6WyJyYyIsImNvbmZpZ3VyYXRpb25VdGlsaXRpZXMiLCJtaWdyYXRlIiwidmVyc2lvblV0aWxpdGllcyIsInNldFJDQmFzZUV4dGVuc2lvbiIsImNoZWNrUkNGaWxlRXhpc3RzIiwidXBkYXRlUkNGaWxlIiwid3JpdGVSQ0ZpbGUiLCJyZWFkUkNGaWxlIiwiRklORCIsInJldHJpZXZlUm9vdERpcmVjdG9yeVBhdGhzIiwiY29uZmlndXJhdGlvbiIsInJlYWRDb25maWd1cmF0aW9uRmlsZSIsInJvb3REaXJlY3RvcnlQYXRocyIsInJldHJpZXZlUHJldmlvdXNSdWxlcyIsInByZXZpb3VzUnVsZXMiLCJwcmV2aW91c1J1bGVzSlNPTiIsInJ1bGVzRnJvbVBhdGhSdWxlc0pTT04iLCJyZXRyaWV2ZUlnbm9yZWRGaWxlUGF0aFJ1bGVzIiwiaWdub3JlZEZpbGVQYXRoUnVsZXMiLCJpZ25vcmVkRmlsZVBhdGhSdWxlc0pTT04iLCJyZXRyaWV2ZVBlcm1pdHRlZEZpbGVQYXRoUnVsZXMiLCJwZXJtaXR0ZWRGaWxlUGF0aFJ1bGVzIiwicGVybWl0dGVkRmlsZVBhdGhSdWxlc0pTT04iLCJyZXRyaWV2ZUlnbm9yZWREaXJlY3RvcnlQYXRoUnVsZXMiLCJpZ25vcmVkRGlyZWN0b3J5UGF0aFJ1bGVzIiwiaWdub3JlZERpcmVjdG9yeVBhdGhSdWxlc0pTT04iLCJyZXRyaWV2ZVBlcm1pdHRlZERpcmVjdG9yeVBhdGhSdWxlcyIsInBlcm1pdHRlZERpcmVjdG9yeVBhdGhSdWxlcyIsInBlcm1pdHRlZERpcmVjdG9yeVBhdGhSdWxlc0pTT04iLCJ1cGRhdGVSb290RGlyZWN0b3J5UGF0aHMiLCJ1cGRhdGVDb25maWd1cmF0aW9uRmlsZSIsInVwZGF0ZVByZXZpb3VzUnVsZXMiLCJydWxlc0pTT05Gcm9tUnVsZXMiLCJ1cGRhdGVJZ25vcmVkRmlsZVBhdGhSdWxlcyIsInVwZGF0ZVBlcm1pdHRlZEZpbGVQYXRoUnVsZXMiLCJ1cGRhdGVJZ25vcmVkRGlyZWN0b3J5UGF0aFJ1bGVzIiwidXBkYXRlUGVybWl0dGVkRGlyZWN0b3J5UGF0aFJ1bGVzIiwiY3JlYXRlQ29uZmlndXJhdGlvbkZpbGUiLCJjcmVhdGVDb25maWd1cmF0aW9uIiwianNvbiIsIm1pZ3JhdGVDb25maWd1cmF0aW9uRmlsZSIsImFzc2VydENvbmZpZ3VyYXRpb25GaWxlRXhpc3RzIiwibWlncmF0aW9uTWFwIiwiVkVSU0lPTl8xXzAiLCJtaWdyYXRlQ29uZmlndXJhdGlvblRvVmVyc2lvbl8xXzEiLCJWRVJTSU9OXzFfMSIsIm1pZ3JhdGVDb25maWd1cmF0aW9uVG9WZXJzaW9uXzFfMiIsIlZFUlNJT05fMV8yIiwibWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMV8zIiwiVkVSU0lPTl8xXzMiLCJtaWdyYXRlQ29uZmlndXJhdGlvblRvVmVyc2lvbl8xXzQiLCJWRVJTSU9OXzFfNCIsIm1pZ3JhdGVDb25maWd1cmF0aW9uVG9WZXJzaW9uXzFfNyIsImxhdGVzdFZlcnNpb24iLCJWRVJTSU9OXzFfNyIsImNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMiLCJyY0ZpbGVFeGlzdHMiLCJjb25maWd1cmF0aW9uRmlsZUV4aXN0cyIsImNvbnNvbGUiLCJsb2ciLCJDT05GSUdVUkFUSU9OX0ZJTEVfRE9FU19OT1RfRVhJU1RfTUVTU0FHRSIsInByb2Nlc3MiLCJleGl0IiwibW9kdWxlIiwiZXhwb3J0cyIsIndyaXRlQ29uZmlndXJhdGlvbkZpbGUiLCJhZGRlZENvbmZpZ3VyYXRpb24iLCJkZWxldGVDb25maWd1cmF0aW9uTmFtZXMiLCJhZGRlZFByb3BlcnRpZXMiLCJkZWxldGVkUHJvcGVydHlOYW1lcyIsInJ1bGVzSlNPTiIsInJ1bGVzIiwibWFwIiwicnVsZUpTT04iLCJydWxlIiwiR2xvYlJ1bGUiLCJmcm9tSlNPTiIsIlJlZ2V4UnVsZSIsIlN0cmluZ1J1bGUiLCJ0b0pTT04iXSwibWFwcGluZ3MiOiJBQUFBOzs7OzJCQUV5RDs2REFFcEM7OERBQ0M7K0RBQ0M7MkJBRUY7NkJBQ2U7NkJBQ2M7NkJBQ0E7NkJBQ0E7NkJBQ0E7MEJBRVE7MEJBQ21DOzs7Ozs7QUFFN0YsTUFBTSxFQUFFQSxFQUFFLEVBQUUsR0FBR0MsaUNBQXNCLEVBQy9CLEVBQUVDLE9BQU8sRUFBRSxHQUFHQywyQkFBZ0IsRUFDOUIsRUFBRUMsa0JBQWtCLEVBQUVDLGlCQUFpQixFQUFFQyxZQUFZLEVBQUVDLFdBQVcsRUFBRUMsVUFBVSxFQUFFLEdBQUdSO0FBRXpGSSxtQkFBbUJLLGVBQUk7QUFFdkIsU0FBU0M7SUFDUCxNQUFNQyxnQkFBZ0JDLHlCQUNoQixFQUFFQyxrQkFBa0IsRUFBRSxHQUFHRjtJQUUvQixPQUFPRTtBQUNUO0FBRUEsU0FBU0M7SUFDUCxNQUFNSCxnQkFBZ0JDO0lBRXRCLElBQUksRUFBRUcsYUFBYSxFQUFFLEdBQUdKO0lBRXhCLE1BQU1LLG9CQUFvQkQsZUFBZ0IsR0FBRztJQUU3Q0EsZ0JBQWdCRSx1QkFBdUJEO0lBRXZDLE9BQU9EO0FBQ1Q7QUFFQSxTQUFTRztJQUNQLE1BQU1QLGdCQUFnQkM7SUFFdEIsSUFBSSxFQUFFTyxvQkFBb0IsRUFBRSxHQUFHUjtJQUUvQixNQUFNUywyQkFBMkJELHNCQUF1QixHQUFHO0lBRTNEQSx1QkFBdUJGLHVCQUF1Qkc7SUFFOUMsT0FBT0Q7QUFDVDtBQUVBLFNBQVNFO0lBQ1AsTUFBTVYsZ0JBQWdCQztJQUV0QixJQUFJLEVBQUVVLHNCQUFzQixFQUFFLEdBQUdYO0lBRWpDLE1BQU1ZLDZCQUE2QkQsd0JBQXlCLEdBQUc7SUFFL0RBLHlCQUF5QkwsdUJBQXVCTTtJQUVoRCxPQUFPRDtBQUNUO0FBRUEsU0FBU0U7SUFDUCxNQUFNYixnQkFBZ0JDO0lBRXRCLElBQUksRUFBRWEseUJBQXlCLEVBQUUsR0FBR2Q7SUFFcEMsTUFBTWUsZ0NBQWdDRCwyQkFBNEIsR0FBRztJQUVyRUEsNEJBQTRCUix1QkFBdUJTO0lBRW5ELE9BQU9EO0FBQ1Q7QUFFQSxTQUFTRTtJQUNQLE1BQU1oQixnQkFBZ0JDO0lBRXRCLElBQUksRUFBRWdCLDJCQUEyQixFQUFFLEdBQUdqQjtJQUV0QyxNQUFNa0Isa0NBQWtDRCw2QkFBOEIsR0FBRztJQUV6RUEsOEJBQThCWCx1QkFBdUJZO0lBRXJELE9BQU9EO0FBQ1Q7QUFFQSxTQUFTRSx5QkFBeUJqQixrQkFBa0I7SUFDbERrQix3QkFBd0I7UUFDdEJsQjtJQUNGO0FBQ0Y7QUFFQSxTQUFTbUIsb0JBQW9CakIsYUFBYTtJQUN4QyxNQUFNQyxvQkFBb0JpQixtQkFBbUJsQjtJQUU3Q0EsZ0JBQWdCQyxtQkFBb0IsR0FBRztJQUV2Q2Usd0JBQXdCO1FBQ3RCaEI7SUFDRjtBQUNGO0FBRUEsU0FBU21CLDJCQUEyQmYsb0JBQW9CO0lBQ3RELE1BQU1DLDJCQUEyQmEsbUJBQW1CZDtJQUVwREEsdUJBQXVCQywwQkFBMkIsR0FBRztJQUVyRFcsd0JBQXdCO1FBQ3RCWjtJQUNGO0FBQ0Y7QUFFQSxTQUFTZ0IsNkJBQTZCYixzQkFBc0I7SUFDMUQsTUFBTUMsNkJBQTZCVSxtQkFBbUJYO0lBRXREQSx5QkFBeUJDLDRCQUE2QixHQUFHO0lBRXpEUSx3QkFBd0I7UUFDdEJUO0lBQ0Y7QUFDRjtBQUVBLFNBQVNjLGdDQUFnQ1gseUJBQXlCO0lBQ2hFLE1BQU1DLGdDQUFnQ08sbUJBQW1CUjtJQUV6REEsNEJBQTRCQywrQkFBZ0MsR0FBRztJQUUvREssd0JBQXdCO1FBQ3RCTjtJQUNGO0FBQ0Y7QUFFQSxTQUFTWSxrQ0FBa0NULDJCQUEyQjtJQUNwRSxNQUFNQyxrQ0FBa0NJLG1CQUFtQkw7SUFFM0RBLDhCQUE4QkMsaUNBQWtDLEdBQUc7SUFFbkVFLHdCQUF3QjtRQUN0Qkg7SUFDRjtBQUNGO0FBRUEsU0FBU1U7SUFDUCxNQUFNM0IsZ0JBQWdCNEIsSUFBQUEsZ0NBQW1CLEtBQ25DQyxPQUFPN0IsZUFBZSxHQUFHO0lBRS9CSixZQUFZaUM7QUFDZDtBQUVBLFNBQVNDO0lBQ1BDO0lBRUEsSUFBSUYsT0FBT2hDO0lBRVgsTUFBTW1DLGVBQWU7UUFDYixDQUFFQyxxQkFBVyxDQUFFLEVBQUVDLDhDQUFpQztRQUNsRCxDQUFFQyxxQkFBVyxDQUFFLEVBQUVDLDhDQUFpQztRQUNsRCxDQUFFQyxxQkFBVyxDQUFFLEVBQUVDLDhDQUFpQztRQUNsRCxDQUFFQyxxQkFBVyxDQUFFLEVBQUVDLDhDQUFpQztRQUNsRCxDQUFFQyxxQkFBVyxDQUFFLEVBQUVDLDhDQUFpQztJQUNwRCxHQUNBQyxnQkFBZ0JDLHFCQUFXO0lBRWpDZixPQUFPdEMsUUFBUXNDLE1BQU1HLGNBQWNXO0lBRW5DL0MsWUFBWWlDO0FBQ2Q7QUFFQSxTQUFTZ0I7SUFDUCxNQUFNQyxlQUFlcEQscUJBQ2ZxRCwwQkFBMEJELGNBQWMsR0FBRztJQUVqRCxPQUFPQztBQUNUO0FBRUEsU0FBU2hCO0lBQ1AsTUFBTWdCLDBCQUEwQkY7SUFFaEMsSUFBSSxDQUFDRSx5QkFBeUI7UUFDNUJDLFFBQVFDLEdBQUcsQ0FBQ0MsbURBQXlDO1FBRXJEQyxRQUFRQyxJQUFJLENBQUM7SUFDZjtBQUNGO0FBRUFDLE9BQU9DLE9BQU8sR0FBRztJQUNmdkQ7SUFDQUk7SUFDQUk7SUFDQUc7SUFDQUc7SUFDQUc7SUFDQUs7SUFDQUY7SUFDQUk7SUFDQUM7SUFDQUM7SUFDQUM7SUFDQUM7SUFDQUc7SUFDQWU7QUFDRjtBQUVBLFNBQVM1QztJQUNQOEI7SUFFQSxNQUFNRixPQUFPaEMsY0FDUEcsZ0JBQWdCNkIsTUFBTSxHQUFHO0lBRS9CLE9BQU83QjtBQUNUO0FBRUEsU0FBU3VELHVCQUF1QnZELGFBQWE7SUFDM0MrQjtJQUVBLE1BQU1GLE9BQU83QixlQUFlLEdBQUc7SUFFL0JKLFlBQVlpQztBQUNkO0FBRUEsU0FBU1Qsd0JBQXdCb0Msa0JBQWtCLEVBQUUsR0FBR0Msd0JBQXdCO0lBQzlFMUI7SUFFQSxNQUFNMkIsa0JBQWtCRixvQkFDbEJHLHVCQUF1QkYsMEJBQTJCLEdBQUc7SUFFM0Q5RCxhQUFhK0Qsb0JBQW9CQztBQUNuQztBQUVBLFNBQVNyRCx1QkFBdUJzRCxTQUFTO0lBQ3ZDLE1BQU1DLFFBQVFELFVBQVVFLEdBQUcsQ0FBQyxDQUFDQztRQUMzQixNQUFNbEMsT0FBT2tDLFVBQ1BDLE9BQU9DLGFBQVEsQ0FBQ0MsUUFBUSxDQUFDckMsU0FDZnNDLGNBQVMsQ0FBQ0QsUUFBUSxDQUFDckMsU0FDbkJ1QyxlQUFVLENBQUNGLFFBQVEsQ0FBQ3JDO1FBRXBDLE9BQU9tQztJQUNUO0lBRUEsT0FBT0g7QUFDVDtBQUVBLFNBQVN2QyxtQkFBbUJ1QyxLQUFLO0lBQy9CLE1BQU1ELFlBQVlDLE1BQU1DLEdBQUcsQ0FBQyxDQUFDRTtRQUMzQixNQUFNRCxXQUFXQyxLQUFLSyxNQUFNO1FBRTVCLE9BQU9OO0lBQ1Q7SUFFQSxPQUFPSDtBQUNUIn0=